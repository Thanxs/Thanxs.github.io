"use strict";function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(e,t,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var o=new(Function.bind.apply(e,a));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function Owner(){this.setCar=function(e){this.cars=_toConsumableArray(e)},this.addCar=function(e){this.cars.push(e)},this.setBalance=function(e){this.balance=e},this.getBalance=function(){return this.balance},this.setOwnerId=function(e){this.id=e}}function Person(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Name anknown",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Age unknown",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"Profession unknown";this.name=e,this.age=t,this.profession=n}function Company(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Name uncknown",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Address unknown";this.name=e,this.address=t}function Car(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Model unknown",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Year of issue unknown",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"Color uncknown",a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"Price unknown";this.name=e,this.year=t,this.color=n,this.price=a}Company.prototype=new Owner,Person.prototype=new Owner;var persons=[new Person("Nastya Sorochan",25,"FrontEnd Developer"),new Person("Alex Nikolskyi",29,"FrontEnd Developer")],companies=[new Company("Hillel","Kanatnaya street, 22")],cars=[new Car("Запорожец ЗАЗ-968",1994,"light-blue",750),new Car("Maserati Quattroporte SQ4",2019,"black",12e4),new Car("Aston Martin Vantage",2018,"silver",15e4),new Car("Lamborghini Huracan",2019,"white",35e4),new Car("Ferrari 812 Superfast 6.5 DCT dasddddddddd",2018,"red",5e5),new Car("Porsche Panamera 4S",2017,"white",1e5)];function showEntities(){$(document.createElement("div")).addClass("entities").html('<div class="persons" data-entity="persons">Persons</div>\n            <div class="companies" data-entity="companies">Companies</div>\n            <div class="cars" data-entity="cars">Cars</div>').click(handleClickOnEntity).appendTo(".container")}function playSound(e){var t=new Audio;t.src="./audio/".concat(e,".mp3"),t.autoplay=!0}function showInfoOfSelectedEntity(e,n){refreshInfo("ul",".info",".info-cars",".wrapper-info",".purchase-info",".sale-info",".delete-confirmation",".btn-add");var a=document.createElement("ul");$(a).addClass("entity__list").addClass("translated").attr("data-entity",n),setTimeout(function(){$(a).removeClass("translated")},300),$(e).each(function(e,t){$(a).append('<li class="entity__item" data-id="'.concat(t.id,'" data-entity="').concat(n,'">\n                                    <div>').concat(t.name,'</div>\n                                    <div btn-block">\n                                       <button class="btn btn-success view">View</button>\n                                       <button class="btn btn-secondary edit">Edit</button>\n                                       <button class="btn btn-danger remove">Remove</button>\n                                    </div>\n                                </li>'))}),$(a).appendTo(".container"),createBtnAdd(n),setEventListenerOnBtn()}function setIdToOwners(e){$(e).each(function(e,t){t.setOwnerId(e+1),t.setCar([])})}function setIdOfCars(){$(cars).each(function(e,t){t.id=e+1})}function refreshInfo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];$(t).each(function(e,t){$(t)&&$(t).remove()})}function showDetailsOfEntity(e,t,n){var a=getIndexOfSelectedEntity(e,t),o=Object.keys(e[a]),r=Object.values(e[a]),s=document.createElement("div");$(s).addClass("wrapper-info").appendTo(".container");var i=document.createElement("div");$(i).addClass("info").appendTo(s);var c=document.createElement("form");$(c).attr("name","formInsideEntityInformation").addClass("entity-form").appendTo(i);for(var l=0;l<o.length;l++)if("id"!==o[l])if("balance"!==o[l])if("cars"!==o[l])$(c).append('<div class="form-group">                                              \n                                                    <input type="text" '.concat(n,' class="form-control" id="inputNumber').concat(l+1,'" placeholder="Please, input ').concat(o[l],'" value="').concat(r[l],'">\n                                                  </div>'));else{var d=r[l].map(function(e){return e.name});$(c).append('<div class="form-group">\n                                                        <input type="text" disabled class="form-control" id="inputNumber'.concat(l+1,'" placeholder="The car is missing" value="').concat(d||"The car is missing",'">\n                                                      </div>'))}else $(c).append('<div class="form-group">\n                                                        <input type="text" disabled class="form-control" id="inputNumber'.concat(l+1,'" placeholder="Please, input ').concat(o[l],'" value="').concat(r[l],'">\n                                                      </div>'))}function getIndexOfSelectedEntity(e,t){return e.findIndex(function(e){return e.id===t})}function getArrayOfValuesInsideForm(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);return t}function removeEntity(e,t,n){for(var a=0;a<e.length;a++)if(e[a].id===n){e.splice(a,1),$(t).remove(),$(event.target).closest(".delete-confirmation").remove();break}}function createInfoAboutCars(e,t,n){playSound("engine-sound-3"),$(".info").addClass("tranlated_sixty");var a=document.createElement("div");$(a).addClass("info-cars"),setTimeout(function(){refreshInfo(".info-cars"),$(a).appendTo(".wrapper-info"),n(e,t)},1e3)}function generateIdOfNewEntity(e){return Math.max.apply(Math,_toConsumableArray(e.map(function(e){return e.id+1})))}function checkLocalStorage(){null!==localStorage.getItem("persons")?persons=JSON.parse(localStorage.getItem("persons")):(persons[0].setBalance(1200),persons[1].setBalance(75e5)),null!==localStorage.getItem("companies")?companies=JSON.parse(localStorage.getItem("companies")):companies[0].setBalance(9e5),null!==localStorage.getItem("cars")&&(cars=JSON.parse(localStorage.getItem("cars")))}function showError(e,t){var n=$(e),a=document.createElement("div");$(a).addClass("error").text(t).appendTo(n)}function createFormInsideInformationOfCars(){var e=document.createElement("form");return $(e).addClass("cars-form").appendTo(".info-cars"),e}function createElementSelectToMakeDealWithCars(){var e=createFormInsideInformationOfCars(),t=document.createElement("select");return $(t).addClass("select-for-deal").appendTo(e),t}function getOwnerWhoGonnaMakeDeal(e,t){var n;if("persons"===t){var a=getIndexOfSelectedEntity(persons,parseInt(e));n=persons[a]}else if("companies"===t){var o=getIndexOfSelectedEntity(companies,parseInt(e));n=companies[o]}return n}function createListOfCarsToBuy(e,t){var n=createElementSelectToMakeDealWithCars(),a=getOwnerWhoGonnaMakeDeal(e,t);1===cars.length?($(n).attr("size",cars.length+1),createBtnConfirmBuyCar(e,t)):0===cars.length?($(".info-cars").html('<div class="notification-missing">Dear, '.concat(a.name,', unfortunately, our agency is not able to                               provide you with cars for purchase at the moment. Have a nice day=!)</div>\n                                <button type="button" class="btn btn-outline-info btn-deal-cancel">Ok</button>')),setEventListenerOnBtn()):($(n).attr("size",cars.length),createBtnConfirmBuyCar(e,t)),$(cars).each(function(e,t){$(n).append('<option class="car-option" data-car-id="'.concat(t.id,'" data-car-price="').concat(t.price,'">').concat(t.name,"</option>"))}),setEventListenerOnOptions()}function createListOfCarsToSell(e,t){var n=createElementSelectToMakeDealWithCars(),a=getOwnerWhoGonnaMakeDeal(e,t),o=a.cars;1===o.length?($(n).attr("size",o.length+1),createBtnConfirmSaleCar(e,t)):0===o.length?($(".info-cars").html('<div class="notification-missing">Dear, '.concat(a.name,', you don\'t have any cars for sale! Have a nice day =)</div>\n                                <button type="button" class="btn btn-outline-info btn-deal-cancel">Ok</button>')),setEventListenerOnBtn()):($(n).attr("size",o.length),createBtnConfirmSaleCar(e,t)),$(o).each(function(e,t){$(n).append('<option class="car-option" data-car-id="'.concat(t.id,'" data-car-price="').concat(t.price,'">').concat(t.name,"</option>"))}),setEventListenerOnOptions()}function createInfoToMakeDeal(e){$(".wrapper-info").addClass("translated");var t=document.createElement("div");return $(t).addClass(e).addClass("translated").appendTo($(".container")),setTimeout(function(){refreshInfo(".wrapper-info",".error"),$(t).removeClass("translated")},600),t}function createInfoAboutSelectedCarToBuy(e,t,n,a){var o=createInfoToMakeDeal("purchase-info"),r=getIndexOfSelectedEntity(cars,e),s=getIndexOfSelectedEntity(persons,n),i=getIndexOfSelectedEntity(companies,n);$(o).html('<div>\n                                        <div class="purchase-confirmation"><b>Model:</b> '.concat(cars[r].name,'</div>\n                                        <div class="purchase-confirmation"><b>Price:</b> ').concat(t,' $</div>\n                                        <div class="purchase-confirmation"><b>Customer:</b> ').concat("persons"===a?persons[s].name:companies[i].name,'</div>\n                                        <div class="buy-buttons-block">\n                                            <button type="button" data-owner-id="').concat(n,'" data-entity="').concat(a,'" data-car-id="').concat(e,'" class="btn btn-info btn-buy-accept">Confirm purchase</button>\n                                            <button type="button" class="btn btn-info btn-buy-decline">Decline</button>\n                                        </div>\n                                </div>')),setEventListenerOnBtn()}function createInfoAboutSelectedCarToSell(e,t,n,a){var o,r,s=createInfoToMakeDeal("sale-info"),i=getIndexOfSelectedEntity(persons,n),c=getIndexOfSelectedEntity(companies,n);"persons"===a?r=getIndexOfSelectedEntity(o=persons[i].cars,e):"companies"===a&&(r=getIndexOfSelectedEntity(o=companies[c].cars,e)),$(s).html('<div>\n                                    <div class="sale-confirmation"><b>Model:</b> '.concat(o[r].name,'</div>\n                                    <div class="sale-confirmation"><b>Initial price:</b> ').concat(t,' $</div>\n                                    <div class="sale-confirmation"> <b>Important notice:</b>\n                                        In the case of a car sale, our agency withholds 20% of the initial cost of the car.\n                                    </div>\n                                    <div class="sale-confirmation"><b>Price after withholds:</b> ').concat(.8*t,' $</div>\n                                    <div class="sale-buttons-block">\n                                        <button type="button" data-owner-id="').concat(n,'" data-entity="').concat(a,'" data-car-id="').concat(e,'" class="btn btn-info btn-sale-accept">Confirm sale</button>\n                                        <button type="button" class="btn btn-info btn-sale-decline">Decline</button>\n                                    </div>\n                            </div>')),setEventListenerOnBtn()}function showInfoToMakeDeal(e,t,n){for(var a=$(".car-option"),o=0;o<a.length;o++){if($(a[o]).attr("selected")){var r=parseInt($(a[o]).attr("data-car-id")),s=parseInt($(a[o]).attr("data-car-price"));refreshInfo(".error"),n(r,s,e,t),playSound("engine-sound-2");break}refreshInfo(".error"),showError(".cars-form","Please, select a car to buy!")}}function changeBalanceOfEntityAfterBuyingCar(e,t){return e-t}function changeBalanceOfEntityAfterCarSold(e,t){return e+.8*t}function checkAvailableCash(e){return!(e<0)}function createNotificationWhenDealMade(e,t,n,a,o){var r=document.createElement("div");return $(r).addClass(a).html("Dear ".concat(e,", congratulations on your ").concat(a.split("-congratulation").join(""),' "').concat(t,'"!<br><strong>Car purchase time:</strong> ').concat(moment().format("MMMM Do YYYY, h:mm:ss a"))),$(n).unbind("click",o),r}function createNotificationAboutPurchaseFailure(e,t,n){$(document.createElement("div")).addClass("purchase-failure").html("Unfortunately, there are not enough funds on the balance sheet of ".concat(e,".<br>Available balance: ").concat(t," $")).appendTo(".purchase-info"),$(n).unbind("click",handleClickOnBtnBuyAcceptPurchase)}function dealInfoDisappearance(e,t,n,a){setTimeout(function(){$(e).addClass("translated")},n),setTimeout(refreshInfo,a,t)}function declineDeal(e){playSound("engine-sound-2"),$(e).addClass("translated_light"),setTimeout(refreshInfo,500,e)}function createNotificationAboutDepositMoney(){$(document.createElement("div")).addClass("deposit-notification").text("Please make your deposit. You can use Visa or MasterCard").appendTo($(".info"))}function createBtnAdd(e){refreshInfo(".btn-add");var t=document.createElement("button");$(t).addClass("btn").addClass("btn-secondary").addClass("btn-add").attr("data-entity",e).addClass("translated"),setTimeout(function(){$(t).removeClass("translated")},0),"persons"===e?$(t).text("Add new person"):"companies"===e?$(t).text("Add new company"):"cars"===e&&$(t).text("Add new car"),$(".entities").after(t)}function createBtnConfirm(e,t){$(document.createElement("button")).addClass("btn").addClass("btn-success").addClass("confirm").attr("data-id",e).attr("data-entity",t).text("Confirm").appendTo(".info")}function createBtnConfirmAddingNewEntity(e){$(document.createElement("button")).addClass("btn").addClass("btn-secondary").addClass("confirm-adding").attr("data-entity",e).text("Add").appendTo(".info"),setEventListenerOnBtn()}function createBtnRequestDepositMoney(e){$(document.createElement("button")).addClass("btn").addClass("btn-outline-success").addClass("btn-deposit").attr("data-entity",e).text("Deposit Money").appendTo(".info")}function createButtonsToMakeDealsWithCars(e,t){$(document.createElement("div")).addClass("block-btns-deals").html('  <button type="button" class="btn btn-outline-warning btn-buy" data-id="'.concat(e,'" data-entity="').concat(t,'">buy car</button>\n            <button type="button" class="btn btn-outline-info btn-sale" data-id="').concat(e,'" data-entity="').concat(t,'">sell car</button>')).appendTo(".entity-form"),setEventListenerOnBtn()}function createBtnConfirmBuyCar(e,t){$(document.createElement("button")).attr("type","button").attr("data-entity-id",e).attr("data-entity",t).addClass("btn").addClass("btn-outline-warning").addClass("btn-buy-confirm").text("buy car").appendTo(".cars-form"),setEventListenerOnBtn()}function createBtnConfirmSaleCar(e,t){var n=document.createElement("button");$(n).attr("type","button").attr("data-entity-id",e).attr("data-entity",t).addClass("btn-outline-info").addClass("btn").addClass("btn-sale-confirm").text("sell car"),$(".select-for-deal").after($(n)),setEventListenerOnBtn()}function validateFormOfPerson(e){return!!(/^[A-Z][a-z]{1,20}\s[A-Z][a-z]{1,20}|[A-Z][a-z]{1,20}$/.test(e[0])&&/^([0-9]|[1-9]\d|1\d{2})$/.test(e[1])&&/^[\w*\s-]+$/.test(e[2]))}function validateFormOfCompany(e){return!(!/^[\w*\s-]+$/.test(e[0])||!/^[a-zA-Z0-9,\.\s]+$/.test(e[1]))}function validateFormOfCar(e){return!!(/^[^\s].{1,50}$/.test(e[0])&&/^19[7-9]\d|20[0-1]\d$/.test(e[1])&&/^[a-zA-Z]+[-]?[a-zA-z]+$/.test(e[2])&&/^\d{1,6}$/.test(e[3]))}function validateFormOfDeposit(e){return!(!/^(\d{4}\s\d{4}\s\d{4}\s\d{4})$/.test(e[0])||!/^[1-9]\d{3,6}$/.test(e[1]))}function setEventListenerOnBtn(){for(var e=$(".btn"),t=0;t<e.length;t++)$(e[t]).hasClass("view")&&$(e[t]).click(handleClickOnBtnView),$(e[t]).hasClass("edit")&&$(e[t]).click(handleClickOnBtnEdit),$(e[t]).hasClass("confirm")&&$(e[t]).click(handleClickOnBtnConfirm),$(e[t]).hasClass("remove")&&$(e[t]).click(handleClickOnBtnRemove),$(e[t]).hasClass("btn-add")&&$(e[t]).click(handleClickOnBtnAdd),$(e[t]).hasClass("confirm-adding")&&$(e[t]).click(handleClickOnBtnConfirmAdding),$(e[t]).hasClass("btn-deposit")&&$(e[t]).click(handleClickOnBtnRequestDeposit),$(e[t]).hasClass("btn-make-deposit")&&$(e[t]).click(handleClickOnBtnMakeDeposit),$(e[t]).hasClass("btn-buy")&&$(e[t]).click(handleClickOnBtnBuy),$(e[t]).hasClass("btn-buy-confirm")&&$(e[t]).click(handleClickOnBtnBuyConfirm),$(e[t]).hasClass("btn-buy-accept")&&$(e[t]).click(handleClickOnBtnBuyAcceptPurchase),$(e[t]).hasClass("btn-buy-decline")&&$(e[t]).click(handleClickOnBtnDeclinePurchase),$(e[t]).hasClass("btn-sale")&&$(e[t]).click(handleClickOnBtnSale),$(e[t]).hasClass("btn-deal-cancel")&&$(e[t]).click(handleClickOnBtnDealCancel),$(e[t]).hasClass("btn-sale-confirm")&&$(e[t]).click(handleClickOnBtnSaleConfirm),$(e[t]).hasClass("btn-sale-accept")&&$(e[t]).click(handleClickOnBtnSaleAccept),$(e[t]).hasClass("btn-sale-decline")&&$(e[t]).click(handleClickOnBtnSaleDecline)}function setEventListenerOnOptions(){$(".car-option").click(handleClickOnCarOption)}function handleClickOnEntity(e){var t=$(e.target).attr("data-entity");"persons"===t&&(showInfoOfSelectedEntity(persons,t),playSound("engine-sound")),"companies"===t&&(showInfoOfSelectedEntity(companies,t),playSound("engine-sound")),"cars"===t&&(showInfoOfSelectedEntity(cars,t),playSound("engine-sound"))}function handleClickOnBtnView(e){refreshInfo(".info",".info-cars",".wrapper-info",".purchase-info",".sale-info",".delete-confirmation");var t=parseInt($(e.target.closest("li")).attr("data-id")),n=$(e.target.closest("li")).attr("data-entity");"cars"===n?showDetailsOfEntity(cars,t,"disabled"):"persons"===n?showDetailsOfEntity(persons,t,"disabled"):"companies"===n&&showDetailsOfEntity(companies,t,"disabled")}function handleClickOnBtnEdit(e){refreshInfo(".info",".info-cars",".wrapper-info",".purchase-info",".sale-info",".delete-confirmation");var t=parseInt($(e.target.closest("li")).attr("data-id")),n=$(e.target.closest("li")).attr("data-entity");"cars"===n?showDetailsOfEntity(cars,t,""):"persons"===n?(showDetailsOfEntity(persons,t,""),createButtonsToMakeDealsWithCars(t,n)):"companies"===n&&(showDetailsOfEntity(companies,t,""),createButtonsToMakeDealsWithCars(t,n)),createBtnConfirm(t,n),setEventListenerOnBtn(t)}function handleClickOnBtnConfirm(e){var t=parseInt($(e.target).attr("data-id")),n=$(e.target).attr("data-entity"),a=getIndexOfSelectedEntity(persons,t),o=getIndexOfSelectedEntity(companies,t),r=getIndexOfSelectedEntity(cars,t),s=getArrayOfValuesInsideForm($("entity-form"));"cars"===n&&(validateFormOfCar(s)?(cars[r].name=s[0],cars[r].year=s[1],cars[r].color=s[2],cars[r].price=s[3],showInfoOfSelectedEntity(cars,"cars"),setEventListenerOnBtn(),localStorage.setItem("cars",JSON.parse(cars))):(refreshInfo(".error"),showError(".entity-form","Please fill out the proper information!")));"persons"===n&&(validateFormOfPerson(s)?(persons[a].name=s[0],persons[a].age=s[1],persons[a].profession=s[2],showInfoOfSelectedEntity(persons,"persons"),setEventListenerOnBtn(),localStorage.setItem("persons",JSON.stringify(persons))):(refreshInfo(".error"),showError(".entity-form","Please, fill out the proper information in all fields! The name must start with a capital letter and consist of at least two characters")));"companies"===n&&(validateFormOfCompany(s)?(companies[o].name=s[0],companies[o].address=s[1],showInfoOfSelectedEntity(companies,"companies"),setEventListenerOnBtn(),localStorage.setItem("companies",JSON.stringify(companies))):(refreshInfo(".error"),showError(".entity-form","Please, fill out the proper information in all fields!")))}function handleClickOnBtnRemove(e){refreshInfo(".info",".info-cars",".wrapper-info",".purchase-info",".sale-info",".delete-confirmation");var t,n=parseInt($(e.target).closest("li").attr("data-id")),a=$(e.target).closest("li").attr("data-entity"),o=document.createElement("div");$(o).addClass("delete-confirmation"),"persons"===a?t="person":"companies"===a?t="company":"cars"===a&&(t="car"),$(o).html("<div>\n                                    <p>Are you sure to delete this ".concat(t,'?<p>\n                                    <button type="button" id="yes" class="btn btn-success">Yes</button>\n                                    <button type="button" id="cancel" class="btn btn-danger">Cancel</button>\n                                </div>')).appendTo(".container"),$("#yes").attr("data-id",n).attr("data-entity",a).click(handleClickOnBtnConfirmToRemove),$("#cancel").click(handleClickOnBtnCancelToRemove)}function handleClickOnBtnConfirmToRemove(e){var t=parseInt($(e.target).attr("data-id")),n=$(e.target).attr("data-entity"),a=$('li[data-id="'.concat(t,'"][data-entity="').concat(n,'"]'));"cars"===n?(removeEntity(cars,a,t),localStorage.setItem("cars",JSON.stringify(cars))):"persons"===n?(removeEntity(persons,a,t),localStorage.setItem("persons",JSON.stringify(persons))):"companies"===n&&(removeEntity(companies,a,t),localStorage.setItem("companies",JSON.stringify(companies)))}function handleClickOnBtnCancelToRemove(e){$(e.target).closest(".delete-confirmation").remove()}function handleClickOnBtnAdd(e){refreshInfo(".info",".info-cars",".wrapper-info",".purchase-info",".sale-info",".delete-confirmation");var t,n=$(e.target).attr("data-entity");"cars"===n?t=["name","year","color","price"]:"persons"===n?t=["name","age","profession"]:"companies"===n&&(t=["name","address"]),$(document.createElement("div")).addClass("info").appendTo(".container");var a=document.createElement("form");$(a).attr("name","formInsideEntityInformation").addClass("entity-form").appendTo(".info");for(var o=0;o<t.length;o++)"id"!==t[o]&&"car"!==t[o]&&"balance"!==t[o]&&$(a).append('<div class="form-group">\n                                                    <input type="text" class="form-control" id="inputNumber'.concat(o+1,'" placeholder="Please, input ').concat(t[o],'" value="">\n                                                  </div>'));createBtnConfirmAddingNewEntity(n)}function handleClickOnBtnConfirmAdding(e){var t=$(e.target).attr("data-entity"),n=generateIdOfNewEntity(cars),a=generateIdOfNewEntity(persons),o=generateIdOfNewEntity(companies);n===-1/0&&(n=1),a===-1/0&&(a=1),o===-1/0&&(o=1);var r=document.forms.formInsideEntityInformation,s=r.elements,i=getArrayOfValuesInsideForm(r),c=validateFormOfPerson(i),l=validateFormOfCompany(i),d=validateFormOfCar(i);if("persons"===t&&c){persons.push(_construct(Person,_toConsumableArray(i))),persons[persons.length-1].setOwnerId(a),persons[persons.length-1].setCar([]),persons[persons.length-1].setBalance(0),refreshInfo(".confirm-adding",".error");for(var f=0;f<s.length;f++)$(s[f]).attr("disabled",!0);createNotificationAboutDepositMoney(),createBtnRequestDepositMoney(t),setEventListenerOnBtn(),localStorage.setItem("persons",JSON.stringify(persons))}else if("companies"===t&&l){companies.push(_construct(Company,_toConsumableArray(i))),companies[companies.length-1].setOwnerId(o),companies[companies.length-1].setCar([]),companies[companies.length-1].setBalance(0),refreshInfo(".confirm-adding",".error");for(var p=0;p<s.length;p++)$(s[p]).attr("disabled",!0);createNotificationAboutDepositMoney(),createBtnRequestDepositMoney(t),setEventListenerOnBtn(),localStorage.setItem("companies",companies)}else"cars"===t&&d?(cars.push(_construct(Car,_toConsumableArray(i))),cars[cars.length-1].id=n,showInfoOfSelectedEntity(cars,t),setEventListenerOnBtn(),localStorage.setItem("cars",JSON.stringify(cars))):(refreshInfo(".error"),showError(".entity-form","Please, fill out the proper information in all fields! The name must start with a capital letter and consist of at least two characters"))}function handleClickOnBtnRequestDeposit(e){refreshInfo("#deposit-form",".btn-make-deposit",".deposit-notification");var t=$(e.target).attr("data-entity"),n=document.createElement("div");$(n).append('<form id=\'deposit-form\'>\n                                <div class="form-group">\n                                    <input type="text" class="form-control" id="credit-card" placeholder="Enter credit card number">\n                                    <small class="form-text text-muted">We\'ll never share your credit card number with anyone else.</small>\n                                </div>\n                                <div class="form-group">                                \n                                    <input type="text" class="form-control" id="deposit-amount" placeholder="Enter amount of deposit">                                \n                                </div>\n                            </form>\n                            <button type="button" class="btn btn-success btn-make-deposit" data-entity="'.concat(t,'">make a deposit</button>')),$(".btn-deposit").after(n),setEventListenerOnBtn()}function handleClickOnBtnMakeDeposit(e){var t=$(e.target).attr("data-entity"),n=getArrayOfValuesInsideForm($("#deposit-form")[0]),a=validateFormOfDeposit(n);a&&"persons"===t?(persons[persons.length-1].balance=parseInt(n[1]),showInfoOfSelectedEntity(persons,t)):a&&"companies"===t?(companies[companies.length-1].balance=parseInt(n[1]),showInfoOfSelectedEntity(companies,t)):(refreshInfo(".error"),showError("#deposit-form","Credit card must be entered in correct form (xxxx xxxx xxxx xxxx). Your request to deposit is above the minimum limit of USD 1000"))}function handleClickOnBtnBuy(e){createInfoAboutCars($(e.target).attr("data-id"),$(e.target).attr("data-entity"),createListOfCarsToBuy)}function handleClickOnBtnBuyConfirm(e){showInfoToMakeDeal(parseInt($(e.target).attr("data-entity-id")),$(e.target).attr("data-entity"),createInfoAboutSelectedCarToBuy)}function handleClickOnBtnBuyAcceptPurchase(e){var t,n,a=parseInt($(e.target).attr("data-owner-id")),o=parseInt($(e.target).attr("data-car-id")),r=$(e.target).attr("data-entity"),s=getIndexOfSelectedEntity(cars,o),i=getIndexOfSelectedEntity(persons,a),c=getIndexOfSelectedEntity(companies,a);"persons"===r&&(t=persons[i],n=persons[i].balance),"companies"===r&&(t=companies[c],n=companies[c].balance);var l=cars[s],d=changeBalanceOfEntityAfterBuyingCar(n,cars[s].price),f=checkAvailableCash(d);refreshInfo(".purchase-congratulation",".purchase-failure");var p=$(".purchase-info");if(f){t.balance=d,t.cars.push(l),playSound("car-bought");var u=createNotificationWhenDealMade(t.name,cars[s].name,e.target,"purchase-congratulation",handleClickOnBtnBuyAcceptPurchase);$(p).append(u),localStorage.setItem("persons",JSON.stringify(persons)),localStorage.setItem("companies",JSON.stringify(companies)),dealInfoDisappearance(p,".purchase-info",13e3,15500)}else playSound("bad-luck"),createNotificationAboutPurchaseFailure(t.name,t.balance,e.target)}function handleClickOnBtnSaleAccept(e){var t,n,a=parseInt($(e.target).attr("data-owner-id")),o=parseInt($(e.target).attr("data-car-id")),r=$(e.target).attr("data-entity"),s=getIndexOfSelectedEntity(persons,a),i=getIndexOfSelectedEntity(companies,a);"persons"===r&&(t=persons[s],n=persons[s].balance),"companies"===r&&(t=companies[i],n=companies[i].balance);var c=getIndexOfSelectedEntity(t.cars,o),l=changeBalanceOfEntityAfterCarSold(n,t.cars[c].price);refreshInfo(".sale-congratulation");var d=$(".sale-info"),f=createNotificationWhenDealMade(t.name,t.cars[c].name,e.target,"sale-congratulation",handleClickOnBtnSaleAccept);$(d).append(f),t.balance=l,t.cars.splice(c,1),playSound("cash-came"),localStorage.setItem("persons",JSON.stringify(persons)),localStorage.setItem("companies",JSON.stringify(companies)),dealInfoDisappearance(d,".sale-info",4e3,4500)}function handleClickOnBtnSale(e){createInfoAboutCars($(e.target).attr("data-id"),$(e.target).attr("data-entity"),createListOfCarsToSell)}function handleClickOnBtnSaleConfirm(e){showInfoToMakeDeal(parseInt($(e.target).attr("data-entity-id")),$(e.target).attr("data-entity"),createInfoAboutSelectedCarToSell)}function handleClickOnBtnDealCancel(){playSound("engine-sound-2"),$(".wrapper-info").addClass("translated"),setTimeout(refreshInfo,500,".wrapper-info")}function handleClickOnBtnDeclinePurchase(){declineDeal(".purchase-info")}function handleClickOnBtnSaleDecline(){declineDeal(".sale-info")}function handleClickOnCarOption(e){playSound("select-car-2"),$(".car-option").removeAttr("selected"),$(e.target).attr("selected","selected")}showEntities(),setIdToOwners(persons),setIdToOwners(companies),setIdOfCars(),checkLocalStorage();